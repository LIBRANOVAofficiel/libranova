<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LIBRANOVA - Pour un nouveau monde</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
</head>
<body>
  <div id="language-selector" style="position: absolute; top: 10px; right: 10px; z-index: 999;">
  <a href="index.html" title="Français">
    <img src="images/flag-fr.png" alt="FR" style="width: 28px; height: auto; margin-right: 6px;">
  </a>
  <a href="index-en.html" title="English">
    <img src="images/flag-en.png" alt="EN" style="width: 28px; height: auto;">
  </a>
</div>
  <header class="hero-banner">
    <div class="overlay">
      <h1>LIBRANOVA</h1>
      <p class="slogan">
        Pour un nouveau monde, s'unir pour partager, s'éveiller pour changer.<br />
        Ensemble, bâtissons un monde libéré des chaînes de l'injustice.
      </p>
    </div>
  </header>

  <nav>
    <ul>
      <li><a href="#presentation">Présentation</a></li>
      <li><a href="#manifeste">Manifeste</a></li>
      <li><a href="#chants">Chants</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="#rejoindre">Rejoindre</a></li>
      <li><a href="#commentaires">Commentaires</a></li>
      <li><a href="#compteur">Compteur</a></li>
    </ul>
  </nav>

 <section id="presentation" style="position: relative; text-align: center; color: white;">
  <img src="images/banniere-utopie-travail-vie.png" alt="Travail vs Vie humaine" class="banniere-image" />

  <div class="banniere-texte">
    <h2 style="font-size: 2rem; font-weight: bold; background-color: transparent; color: black; margin: 0;">Présentation</h2>
  </div>
</section>

<section style="text-align: center; padding: 2rem; background-color: rgba(255,255,255,0.9); margin-top: -4px; border-radius: 12px;">
  <p>
    LIBRANOVA est un projet de transformation globale, une vision pour un monde libéré de l'argent, où l’humanité s’unit dans le respect, la solidarité et la conscience collective.
  </p>
  <p>
    C’est l’appel à bâtir ensemble une civilisation équitable, sans frontières économiques, où chaque être humain a accès à un logement, à la nourriture, à la santé, au savoir, à la paix et à la dignité.
  </p>
  <p>
    LIBRANOVA refuse le règne de la rareté imposée. Il propose un monde d’abondance partagée, en harmonie avec la planète, libérant le potentiel humain des chaînes du profit.
  </p>
</section>
<section id="manifeste" style="position: relative; text-align: center; color: white; margin-top: 2rem;">
  <img class="banniere-image" src="images/banniere-utopie-pauvreté-fin de la misére.png" alt="Pauvreté vs Fin de la misère">

  <div class="banniere-texte" style="top: 10%; transform: translate(-50%, -10%);">
    <h2 style="font-size: 2rem; margin: 0; color: black; background: transparent; text-shadow: none;">Le Manifeste</h2>
  </div>
</section>

<div style="background-color: rgba(255,255,255,0.85); padding: 2rem; border-radius: 12px; margin: 1rem auto; max-width: 1000px; text-align: center;">
  <p style="color: #333;">Téléchargez le manifeste complet :</p>
  <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
    <a href="Manifeste-LIBRANOVA.pdf" class="button" download>Télécharger le PDF</a>
    <a href="Manifeste-LIBRANOVA.pdf" class="button" target="_blank">Lire en ligne</a>
  </div>
</div>
</section>
<section id="chants" style="position: relative; text-align: center; color: white; margin-top: 2rem;">
  <img class="banniere-image" src="images/banniere-utopie-noneveil-eveil.png" alt="Éveil du monde">

  <div class="banniere-texte" style="top: 10%; transform: translate(-50%, -10%);">
    <h2 style="font-size: 2rem; margin: 0; color: black; background: transparent; text-shadow: none;">Chant LIBRANOVA</h2>
  </div>
</section>

<div style="background-color: rgba(255,255,255,0.85); padding: 2rem; border-radius: 12px; margin: 1rem auto; max-width: 1000px; text-align: center;">
  <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 2rem; margin-top: 1rem;">
    <div style="text-align: center;">
      <p><strong>Version féminine</strong><br>Voix douce et émotive, portée par l’espoir.</p>
      <a href="audio/Le chant de l'âme feminin.mp3" class="button" target="_blank">Écouter</a><br><br>
      <a href="audio/Le chant de l'âme feminin.mp3" class="button" download>Télécharger</a>
    </div>
    <div style="text-align: center;">
      <p><strong>Version masculine</strong><br>Voix profonde et engagée.</p>
      <a href="audio/Le chant de l'âme masculin.mp3" class="button" target="_blank">Écouter</a><br><br>
      <a href="audio/Le chant de l'âme masculin.mp3" class="button" download>Télécharger</a>
    </div>
  </div>
  <p style="margin-top: 1rem; font-size: 0.9rem; color: #555;">
    Ces chants sont protégés par la licence CC BY-NC-ND 4.0. Partage libre sans usage commercial.
  </p>
</div>

 <section id="contact" style="position: relative; text-align: center; color: white; margin-top: 2rem;">
  <img class="banniere-image" src="images/banniere-utopie-guerre-paix.png" alt="Guerre vs Paix" />

  <div class="banniere-texte" style="top: 10%; transform: translate(-50%, -10%);">
    <h2 style="font-size: 2rem; margin: 0; color: black; background: transparent; text-shadow: none;">Contact & Réseaux</h2>
  </div>
</section>

<div style="background-color: rgba(255,255,255,0.85); padding: 2rem; border-radius: 12px; margin: 1rem auto; max-width: 1000px; text-align: center;">
  <p>Email : <a href="mailto:libranova.contact@gmail.com">libranova.contact@gmail.com</a></p>
  <p>YouTube : <a href="https://www.youtube.com/@LeporteurdeLIBRANOVA" target="_blank">@LeporteurdeLIBRANOVA</a></p>
  <p>Instagram : <a href="https://www.instagram.com/libranova_officiel" target="_blank">@libranova_officiel</a></p>
</div>
 <section id="rejoindre" style="position: relative; text-align: center; color: white; margin-top: 2rem;">
  <img class="banniere-image" src="images/banniere-utoipie-union.png" alt="Rejoindre LIBRANOVA">
  <div class="banniere-texte" style="top: 10%; transform: translate(-50%, -10%);">
    <h2 style="font-size: 2rem; margin: 0; color: black; background: transparent; text-shadow: none;">Rejoindre LIBRANOVA</h2>
  </div>
</section>

<section style="background-color: rgba(255,255,255,0.9); padding: 2rem; border-radius: 12px; margin: 1rem auto; max-width: 1000px; text-align: center;">
  <p>LIBRANOVA est un appel. Un rêve commun. Une révolution de l’âme et de la raison. Si cette vision résonne en vous, alors vous en êtes déjà une partie. Voici comment vous pouvez agir :</p>
  <ul style="text-align: left; max-width: 800px; margin: 2rem auto;">
    <li><strong>Partager le Manifeste</strong> dans votre langue, sur vos réseaux, autour de vous.</li>
    <li><strong>Faire connaître le Chant de l’Âme</strong>, outil émotionnel puissant pour éveiller les consciences.</li>
    <li><strong>Traduire, diffuser, adapter</strong> le contenu dans d'autres langues ou formats (vidéos, affiches, textes).</li>
    <li><strong>Créer des cercles LIBRANOVA</strong> dans vos villes, écoles, espaces citoyens.</li>
    <li><strong>Nous contacter</strong> pour toute idée, collaboration ou question : <a href="mailto:libranova.contact@gmail.com">libranova.contact@gmail.com</a></li>
    <li><strong>S’éveiller et éveiller</strong> par l’exemple : en vivant dès maintenant les valeurs de LIBRANOVA.</li>
  </ul>
  <p style="font-weight: bold;">Vous croyez en ce monde nouveau ?</p>
  <a href="https://www.mesopinions.com/petition/social/libranova-monde-argent-fonde-humain-planete/242752" class="button" target="_blank" style="background-color: #007bff;">Signer la pétition LIBRANOVA</a>

  <div class="like-container" style="margin-top: 20px;">
    <button class="like-button" id="like-btn">❤️ J’aime</button>
    <span id="like-count">Chargement...</span>
  </div>
</section>

  <section id="commentaires" style="position: relative; text-align: center; color: white; margin-top: 2rem;">
  <img class="banniere-image" src="images/banniere-utopie-avis-libranova.png" alt="Partager votre avis" />
  <div class="banniere-texte" style="top: 10%; transform: translate(-50%, -10%);">
    <h2 style="font-size: 2rem; margin: 0; color: black; background: transparent; text-shadow: none;">Partagez votre avis</h2>
  </div>
</section>

<div style="background-color: rgba(255,255,255,0.9); padding: 2rem; border-radius: 12px; margin: 1rem auto; max-width: 1000px; text-align: center;">
  <p style="color: #333; font-size: 1.1rem;">
    Vos réflexions, ressentis et idées sont précieux. Merci de contribuer à faire grandir LIBRANOVA.
  </p>

<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSf7il1KsWvoiFwUbfNZjNUewlI_PO68PD1AM0wEEh4MrJmMkw/viewform?embedded=true" width="640" height="1388" frameborder="0" marginheight="0" marginwidth="0">Chargement…</iframe>
</div>
<section id="compteur" style="position: relative; text-align: center; color: white; margin-top: 2rem;">
  <img class="banniere-image" src="images/banniere-utopie-visiteur.png" alt="Visiteurs" />

  <!-- Titre -->
  <div class="banniere-texte" style="top: 10%; transform: translate(-50%, -10%);">
    <h2 style="font-size: 2rem; margin: 0; color: white; background: transparent; text-shadow: none;">Visiteurs</h2>
  </div>

  <!-- Citation -->
  <div class="banniere-texte" style="top: 75%; transform: translate(-50%, -75%);">
    <p style="font-size: 1.2rem; font-weight: normal; color: white; margin: 0; background: transparent;">
      L’unification du monde dans l’amour et la fraternité est notre plus grande puissance.
    </p>
  </div>

  <!-- Compteur -->
  <div class="banniere-texte">
    <p id="visitor-count" style="background: transparent; color: black; font-weight: bold; margin-top: 1rem;">
      Chargement…
    </p>
  </div>
</section>

<!-- Section Licence - Version française -->
<section style="background-color: rgba(255,255,255,0.9); padding: 2rem; border-radius: 12px; margin: 2rem auto; max-width: 1000px; text-align: center; font-size: 1.1rem; color: #333;">
  <p style="font-weight: bold; font-size: 1.3rem;">
    © Le porteur de LIBRANOVA
  </p>
  <p>
    Cette œuvre est mise à disposition selon les termes de la licence :
  </p>

  <p style="font-weight: bold; font-size: 1.2rem;">
    Creative Commons Attribution – Pas d’Utilisation Commerciale – Pas de Modification 4.0 International<br>(CC BY-NC-ND 4.0)
  </p>

  <div style="margin: 1rem 0;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt="CC" style="height: 30px; margin-right: 5px;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt="BY" style="height: 30px; margin-right: 5px;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/nc.svg" alt="NC" style="height: 30px; margin-right: 5px;">
    <img src="https://mirrors.creativecommons.org/presskit/icons/nd.svg" alt="ND" style="height: 30px;">
  </div>

  <p>
    Aucune utilisation commerciale, modification ou réinterprétation n’est autorisée sans accord écrit de l’auteur.
  </p>

  <p>
    Pour consulter une copie de cette licence :<br>
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.fr" target="_blank">
      https://creativecommons.org/licenses/by-nc-nd/4.0/deed.fr
    </a>
  </p>
</section>
  <!-- Script JS placé en bas de page (important) -->
 <!-- Script compteur visiteurs (module) -->
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

    const SUPABASE_URL = 'https://sbvczmythudfntzgofjw.supabase.co'
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNidmN6bXl0aHVkZm50emdvZmp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NDk0NjAsImV4cCI6MjA2MzQyNTQ2MH0.chVFdhJFUU1JBsuiDVENggcDlrxq3gEDNK7TEa5aub8'

    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)
   async function logVisit() {
  const visitorId = getOrCreateVisitorId();

  const { data: existing, error: checkError } = await supabase
    .from('VISITS')
    .select('*')
    .eq('visitor_id', visitorId);

  if (checkError) {
    console.error('Erreur de vérification du visiteur :', checkError.message);
    return;
  }

  if (existing.length === 0) {
    const { error: insertError } = await supabase
      .from('VISITS')
      .insert([{ visitor_id: visitorId }]);

    if (insertError) {
      console.error('Erreur enregistrement de la visite :', insertError.message);
    }
  } else {
    console.log('Visite déjà enregistrée');
  }
}

    async function getVisitCount() {
      const { data, error } = await supabase.from('VISITS').select('id')
      if (error) {
        console.error('Erreur récupération compteur :', error.message)
        return null
      }
      return data.length
    }

    document.addEventListener('DOMContentLoaded', async () => {
      await logVisit()
      const count = await getVisitCount()
      const counterDisplay = document.getElementById('visitor-count')
      if (counterDisplay && count !== null) {
        counterDisplay.textContent = `Nombre de visiteurs : ${count}`
      } else {
        counterDisplay.textContent = `Compteur indisponible.`
      }
    })
  </script>

  <!-- Script bouton Like -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script>
    const SUPABASE_URL = 'https://sbvczmythudfntzgofjw.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNidmN6bXl0aHVkZm50emdvZmp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NDk0NjAsImV4cCI6MjA2MzQyNTQ2MH0.chVFdhJFUU1JBsuiDVENggcDlrxq3gEDNK7TEa5aub8';
    const TABLE_NAME = 'likes';

    const supabaseLike = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    function getOrCreateVisitorId() {
      let id = localStorage.getItem('visitor_id');
      if (!id) {
        id = (Math.random().toString(36).substring(2)) + Date.now().toString(36);
        localStorage.setItem('visitor_id', id);
      }
      return id;
    }

    async function fetchLikeCount() {
      const { count, error } = await supabaseLike
        .from(TABLE_NAME)
        .select('*', { count: 'exact', head: true });

      if (!error) {
        document.getElementById('like-count').textContent = `${count} j'aime`;
      } else {
        console.error("Erreur chargement likes :", error.message);
      }
    }

    async function handleLike() {
  const visitorId = getOrCreateVisitorId();
  console.log("visitorId =", visitorId);

  // Vérifier existence d'un like
  const { data: existing, error: selectError } = await supabaseLike
    .from('likes')
    .select('*')
    .eq('ip_hash', visitorId);

  if (selectError) {
    console.error("Erreur de vérification du like :", selectError.message);
    return;
  }

  if (existing && existing.length > 0) {
    console.log("Déjà liké");
    return;
  }

  // Enregistrer le like
  const { error: insertError } = await supabaseLike
    .from('likes')
    .insert([{ ip_hash: visitorId }]);  // << CLÉ : tableau + nom de champ bien orthographié

  if (!insertError) {
    document.querySelector('.like-button').classList.add('clicked');
    fetchLikeCount();
  } else {
    console.error("Erreur d'enregistrement du like :", insertError.message);
  }
}
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("like-btn").addEventListener("click", handleLike);
      fetchLikeCount();
    });
  </script>
</body>
</html>
